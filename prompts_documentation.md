# 项目中的提示词文档

## 简介
此文档列出了项目中使用的所有提示词（Prompts），并说明了它们的用途。

---

## 提示词列表

### 1. `simple_enricher.py`

#### 提示词内容
```
请提供化学品 '{chem_name}' 的以下信息：物理性质、危险性、主要用途。请以JSON格式返回。
```

#### 用途
- 用于提取化学品的物理性质、危险性和主要用途。
- 返回结果以 JSON 格式组织。

---

### 2. `universal_enricher.py`

#### 提示词内容
```
你是一个专家级的数据架构师和提示词工程师。
用户希望构建一个关于“{domain_name}”的知识库。
描述：{description}

请你完成以下任务：
1. 定义该领域的核心实体类型（Entity Type）。
2. 列出该实体最重要的3-5个属性（Attributes），并给出简短描述。
3. 编写一个 System Prompt，设定LLM的角色。
4. 编写一个 User Prompt Template，用于让LLM提取这些属性。模板中应包含 {entity_name} 和 {attributes} 占位符。

请严格以 JSON 格式返回，格式如下：
{
    "schema": {
        "entity_type": "...",
        "attributes": [
            {"name": "...", "description": "..."},
            ...
        ]
    },
    "prompts": {
        "system": "...",
        "user_template": "..."
    }
}
```

#### 用途
- 自动生成特定领域的 Schema 和 Prompt。
- 用于知识库构建中的领域建模。

---

#### 方法 `_call_llm`

##### 提示词内容
- `prompt`: 用户输入的主要内容。
- `system_prompt`: 用于设定 LLM 的角色。

##### 用途
- 统一调用 LLM 接口。
- 支持不同的 LLM 提供商（如 Dashscope）。

---

### 3. `数据补全/modules_new/utils/string_utils.py`

#### 提示词内容 (化学品知识图谱数据查询指令 v4.1)
```
# 🧪 化学品知识图谱数据查询指令 v4.1 - API智能适配版

## 🎯 查询目标
- **化学品名称**: {chemical_name}
- **编号状态**: {cas_status}
- **编号类型**: {cas_type}
- **处理要求**: {query_requirement}
- **处理说明**: {validation_note}

## 🔍 CAS号与流水号智能识别指引
### 📋 "CAS号或流水号"字段说明：
- **CAS号**：国际通用化学物质唯一标识编号（格式：XXXX-XX-X，如64-17-5代表乙醇）
- **流水号**：名录编制单位自定义编号，用于无CAS号的新化学品、复合物、特殊材料
- **优先级**：优先使用国际标准CAS号，无CAS号时用本地流水号保证唯一性

### 🎯 核心任务（根据上述编号分析结果）
1. **CAS号验证与补充**：如当前编号为空、格式错误或为流水号，必须查询补充准确的CAS号
2. **编号唯一性检查**：确保每个化学品都有唯一标识符
3. **格式标准化**：CAS号格式必须为"数字-数字-数字"标准格式
4. **数据关联性验证**：确认编号与化学品名称的准确对应关系
5. **源数据兼容性**：兼容《中国化学品名录2013年版》的"CAS号或流水号"字段结构

{data_source_section}

## 📋 知识图谱属性要求 (用于构建化学品知识图谱)
请为上述化学品提供以下详细信息，用于构建完整的化学品知识图谱。所有数据必须以**简体中文**表述，并确保内容的详尽和准确。

### 🔬 基础标识信息（重点优化）
- **名称**: 化学品的标准中文名称
- **CAS号或流水号**: 
  - 如为标准CAS号，保持原格式并验证准确性
  - 如为流水号，查询是否存在对应CAS号并优先使用CAS号
  - 如为空值，从权威数据库查询补充标准CAS号
  - 格式要求：CAS号严格为"XXXX-XX-X"，流水号为纯数字
- **别名**: 包含所有常用别名，例如英文名、商品名、俗称、学名等。格式："别名1; 别名2; 别名3; 别名4; 别名5"，至少提供3-5个有价值的别名，用分号分隔
- **分子式**: 准确的化学分子式，例如 "C2H6O", "H2SO4"
- **分子量**: 准确的分子量数值，单位为 g/mol，保留至少两位小数，例如 "46.07"

### ⚠️ 危害与安全信息
- **是否为危化品**: 基于《危险化学品目录》，必须明确回答"是"或"否"
- **浓度阈值**: 参考原名录"浓度阈值"字段，详细说明毒理学数据，例如 "LC50(大鼠吸入): 20000 ppm/10h; LD50(大鼠经口): 7060 mg/kg; LD50(兔子皮肤): >5000 mg/kg"
- **危害**: 详细描述对人体和环境的具体危害，需分类说明：
  - **健康危害**: 急性毒性、皮肤腐蚀/刺激、严重眼损伤/眼刺激、致癌性、生殖毒性等
  - **环境危害**: 对水生生物的危害、持久性、生物累积性等
  - **物理危害**: 易燃性、爆炸性、氧化性等
- **防范**: 具体的防护措施和注意事项，需分类说明：
  - **工程控制**: 通风系统、密闭操作等
  - **个体防护**: 呼吸系统防护、眼睛防护、身体防护、手部防护
  - **操作处置与储存**: 操作注意事项、储存条件
- **危害处置**: 发生事故时的具体应急处置方法和急救措施，需分类说明：
  - **泄漏应急处理**: 环境、人员、处理方法
  - **火灾处置**: 灭火方法、有害燃烧产物
  - **急救措施**: 皮肤接触、眼睛接触、吸入、食入后的急救方法

### 🏭 产业链信息 (知识图谱核心)
- **用途**: 详细说明主要用途和应用领域，至少列举5个具体用途，并描述其在应用中扮演的角色
- **自然来源**: 详细说明该化学品在自然界中的存在形式、分布情况、天然来源（如植物、矿物、微生物等），以及天然提取方法。如果是纯人工合成的化学品，则说明"无天然来源，纯人工合成"
- **生产来源 (上游)**: 详细列出其直接上游原料化学品，以及主要的生产商或供应商信息。这是构建产业链上游关系的关键
- **工业生产原料 (下游)**: 详细列出该化学品作为原料可以用于生产哪些下游产品或化学品。这是构建产业链下游关系的关键

### ⚗️ 物理化学性质
- **性质**: 提供一个综合性的、结构化的物理化学性质描述，至少包括：
  - **外观与性状**: 详细描述常温常压下的颜色、状态、气味等感官特征
  - **熔点**: 数值+单位(°C)，例如 "-114.1°C"
  - **沸点**: 数值+单位(°C)，例如 "78.3°C"
  - **密度**: 数值+单位，并注明温度，例如 "0.789 g/cm³(20°C)"
  - **溶解性**: 在水、乙醇等常见溶剂中的溶解情况，可包含定量数据
  - **闪点**: 数值+单位(°C)，并注明开杯/闭杯，例如 "13°C (闭杯)"
  - **稳定性**: 描述其化学稳定性、需要避免的条件（如光、热）和禁配物质

## 📤 输出格式
**必须严格以JSON对象格式返回，确保所有字段完整填写，不要包含任何额外的解释或Markdown标记。**
**重要：除了 `data_source` 字段，其他字段的数据后不需要标明数据来源。**

```json
{{
    "data_source": "网络搜索/模型知识 {{数据来源}}",
    "名称": "化学品标准中文名称",
    "CAS号或流水号": "优先CAS号格式XXXX-XX-X，无CAS号时为流水号",
    "编号类型说明": "标准CAS号/本地流水号/新分配CAS号",
    "别名": "别名1; 别名2; 别名3",
    "分子式": "化学分子式",
    "分子量": "数值 g/mol",
    "是否为危化品": "是/否",
    "浓度阈值": "毒理学数据详情",
    "危害": "危害描述",
    "防范": "防护措施详情",
    "危害处置": "应急处置详情",
    "用途": "用途详情",
    "自然来源": "天然来源详情",
    "生产来源": "上游原料详情",
    "工业生产原料": "下游产品详情",
    "性质": "物理化学性质详情"
}}
```

## ⚡ 特别要求 (知识图谱专用)
- 🔍 **CAS号/流水号智能处理**：
  - 如输入为流水号，必须查询是否存在对应的标准CAS号
  - 如输入为空值或格式错误，必须从权威数据库查询补充标准CAS号
  - 优先使用国际CAS号，确保全球通用性和数据关联性
  - 保证每个化学品都有唯一且准确的标识符
- 📊 **数据来源权威性**: 优先使用PubChem、ECHA等权威源，确保数据质量
- 🎯 **内容详细具体**: 每个字段都要详细填写，避免使用模糊或笼统的描述，为知识图谱提供高质量的属性信息
- 🔗 **关联性描述**: 特别注意产业链（生产来源、工业生产原料）和危害信息的准确性和完整性，这是构建关系图谱的核心
- 🇨🇳 **简体中文**: 所有描述必须使用简体中文
- 📋 **格式严格统一**: 严格遵守JSON输出格式，便于知识图谱的自动化结构化处理

## 💡 字段填写指导
- **CAS号或流水号字段**: 
  - 标准CAS号示例：64-17-5（乙醇）、7732-18-5（水）
  - 流水号示例：202401001、300015678（纯数字格式）
  - 格式验证：确保CAS号符合"数字-数字-数字"标准
- **别名字段**: 包含学名、俗名、商品名、英文名等，用分号分隔，以提供丰富的检索入口
- **浓度阈值**: 尽量提供多种物种（大鼠、兔子等）和多种途径（经口、吸入、皮肤）的毒理学数据，**参考原名录"浓度阈值"字段进行详细说明**。
- **自然来源**: 详细描述天然存在情况，包括在哪些植物、动物、矿物或微生物中发现，以及天然提取工艺
- **产业链信息**: 要清晰地体现化学品在整个产业链中的上游原料和下游产品关系
- **性质描述**: 尽量提供定量数据，并注明测试条件（如温度、压力）
- **数据来源标注**: **仅在顶层 `data_source` 字段中说明本次查询的主要信息来源，例如 "网络搜索 {{PubChem; ECHA}}" 或 "模型知识 {{模型知识}}"。其他字段无需标注来源。**

现在开始查询并生成用于知识图谱的化学品详细数据：
```

#### 用途
- 核心提示词，用于生成详细的化学品知识图谱数据。
- 包含详细的字段定义、格式要求和数据来源说明。
- 强调了CAS号的处理、产业链信息和危害信息的准确性。

---

### 4. `数据补全/modules_new/utils/cas_query.py`

#### 提示词内容 (专业CAS号查询任务)
```
🔍 专业CAS号查询任务

**目标**: 查询化学品 "{chemical_name}" 的准确CAS注册号

**数据源优先级**:
1. 🌐 PubChem (美国国家生物技术信息中心)
2. 🏛️ ECHA (欧洲化学品管理局)
3. 🔬 GESTIS国际化学品数据库
4. 🏭 Sigma-Aldrich、Fisher Scientific、Merck等供应商数据库

**查询要求**:
• 请搜索权威化学数据库中 "{chemical_name}" 的CAS注册号
• 如果有多个CAS号，请提供最常用的主要CAS号
• 确保CAS号格式正确 (XXXX-XX-X 或 XXXXX-XX-X 或更长)
• 优先从官方机构数据库获取

**输出格式** (严格按照以下JSON格式):
```json
{{
    "chemical_name": "{chemical_name}",
    "cas_number": "XXXX-XX-X",
    "source": "数据来源(如PubChem, ECHA等)",
    "confidence": "high/medium/low",
    "alternative_names": ["别名1", "别名2"],
    "notes": "补充说明"
}}
```

**如果未找到CAS号，请输出**:
```json
{{
    "chemical_name": "{chemical_name}",
    "cas_number": null,
    "source": "searched but not found",
    "confidence": "not_found",
    "alternative_names": [],
    "notes": "在权威数据库中未找到对应的CAS号"
}}
```

现在开始联网搜索CAS号:
```

#### 用途
- 专门用于查询化学品的 CAS 号。
- 规定了数据源优先级和输出格式。

---

### 5. `数据补全/modules_new/ui/event_handlers.py`

#### 提示词内容
1. **联网测试**:
   ```
   请联网搜索并告诉我今天最新的三条科技新闻。
   ```
2. **基础功能测试**:
   ```
   你好，请做个自我介绍。
   ```

#### 用途
- 用于测试 API 连接和联网搜索功能是否正常。
